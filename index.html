<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
</head>

<body>
    <div class="container">
        <div id="starterpack" class="row d-flex text-center mt-3 mb-3 no-gutters">
            <div id="jon" class="card bg-light d-flex col-md-3">
                <div class="row no-gutters">
                    <div class="col-md-4">
                        <img src="assets\images\jon-snow.jpg" width=100px />
                    </div>
                    <div class="col-md-8">
                        <div class="card-body text-center">
                            <h4 class="card-title">Jon Snow</h4>
                            <h6 class="card-subtitle text-secondary">Knows Nothing</h6>
                            <h6 class="card-text text-center" id="HP">HP:<span class="text-success"></span></h6>
                            <h6 class="card-text text-center" id="ATP">ATP:<span class="text-dark"></span></h6>
                            <h6 class="card-text text-center" id="CAP">CAP:<span class="text-warning"></span></h6>
                        </div>
                    </div>
                </div>
            </div>
            <div id="dany" class="card bg-light d-flex col-md-3">
                <div class="row no-gutters">
                    <div class="col-md-4">
                        <img src="assets\images\daenerys.png" width=100px />
                    </div>
                    <div class="col-md-8">
                        <div class="card-body text-center">
                            <h4 class="card-title">Daenerys Targeryn</h4>
                            <h6 class="card-subtitle text-secondary">Breaker of Chains</h6>
                            <h6 class="card-text text-center" id="HP">HP:<span class="text-success"> </span></h6>
                            <h6 class="card-text text-center" id="ATP">ATP:<span class="text-dark"></span></h6>
                            <h6 class="card-text text-center" id="CAP">CAP:<span class="text-warning"></span></h6>
                        </div>
                    </div>
                </div>
            </div>
            <div id="cersi" class="card bg-light d-flex col-md-3">
                <div class="row no-gutters">
                    <div class="col-md-4">
                        <img src="assets\images\cersi.png" width=100px />
                    </div>
                    <div class="col-md-8">
                        <div class="card-body text-center">
                            <h4 class="card-title">Cersi Lannister</h4>
                            <h6 class="card-subtitle text-secondary">A Lanister always repays his debts</h6>
                            <h6 class="card-text text-center" id="HP">HP: <span class="text-success"></span></h6>
                            <h6 class="card-text text-center" id="ATP">ATP:<span class="text-dark"></span></h6>
                            <h6 class="card-text text-center" id="CAP">CAP:<span class="text-warning"></span></h6>
                        </div>
                    </div>
                </div>
            </div>
            <div id="nightKing" class="card bg-light d-flex col-md-3">
            <div class="row no-gutters">
                <div class="col-md-4">
                    <img src="assets\images\knightking.jpg" width=100px />
                </div>
                <div class="col-md-8">
                    <div class="card-body text-center">
                        <h4 class="card-title">The Night King</h4>
                        <h6 class="card-subtitle text-secondary">Winter is Coming</h6>
                        <h6 class="card-text text-center" id="HP">HP: <span class="text-success">500</span></h6>
                        <h6 class="card-text text-center" id="ATP">ATP: <span class="text-dark"></span></h6>
                        <h6 class="card-text text-center" id="CAP">CAP: <span class="text-warning"></span></h6>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class=>
        <button id="attack" class="d-none">ATTACK!</button>
        <div id="fighter" class="row d-flex border border-danger mb-5">fighter</div>
    </div>
    
    <div id="holder" class="row d-flex text-center mb-3 no-gutters border border-danger"> holder
    </div>
    </div>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
        //Select a character and move the rest to the defenders section
        var characters = {
            jon: {
                HP: 200,
                ATP: 9,
                CAP: 30,
            },
            dany: {
                HP: 300,
                ATP: 8,
                CAP: 10,
            },
            cersi: {
                HP: 250,
                ATP: 7,
                CAP: 40,
            },
            nightKing: {
                HP: 400,
                ATP: 6,
                CAP: 20,
            },

        };
        update();
        var mainCharacter = "";
        var fighter = "";
        var fighterHP = "";
        console.log("Jon HP:" + (characters.jon.HP + characters.jon.ATP))
        function update(){
        $("#jon #HP span").text(characters.jon.HP);
        $("#jon #ATP span").text(characters.jon.ATP);
        $("#jon #CAP span").text(characters.jon.CAP);
        //----------
        $("#dany #HP span").text(characters.dany.HP);
        $("#dany #ATP span").text(characters.dany.ATP);
        $("#dany #CAP span").text(characters.dany.CAP);
        // ----------
        $("#cersi #HP span").text(characters.cersi.HP);
        $("#cersi #ATP span").text(characters.cersi.ATP);
        $("#cersi #CAP span").text(characters.cersi.CAP);
        // ----------
        $("#nightKing #HP span").text(characters.nightKing.HP);
        $("#nightKing #ATP span").text(characters.nightKing.ATP);
        $("#nightKing #CAP span").text(characters.nightKing.CAP);
        }
        
        $("#holder.card").click(function () {
                
                // $(this)
        });
        $(".card").click(function () {
            if ( mainCharacter === "") {
                mainCharacter = this.id;
                console.log(mainCharacter + " is the selected character.")
                $(".card").not($("#" + this.id)).appendTo($("#holder"));
                $(".card").not($("#" + this.id)).removeClass("bg-light");
                $(".card").not($("#" + this.id)).addClass("bg-secondary");
                $("#attack").removeClass("d-none");
            } else if (mainCharacter) {
                if (fighterHP > 0) {
                    alert("You are already in battle and may not choose another character until you defeat the current one.");
                } else {
                    fighter = this.id;
                    fighterHP = characters[fighter].HP;
                    console.log("----");
                    console.log(fighterHP);
                    $(this).appendTo($("#fighter"));
            }  
        }
    });
        
        $("#attack").click(function () {
            // $(".card:first-child").removeClass("bg-secondary");
            // $(".card:first-child").addClass("bg-danger");
            // var fight = $("#holder .card:first-child").attr("id");
            
            
            characters[fighter].HP = ((characters[fighter].HP) - (characters[mainCharacter].ATP))
            characters[mainCharacter].ATP = (characters[mainCharacter].ATP + characters[mainCharacter].ATP);
            characters[mainCharacter].HP = (characters[mainCharacter].HP - characters[fighter].CAP);
            fighterHP = characters[fighter].HP;
            console.log(fighterHP);
            if (characters[mainCharacter].HP < 0) {
                alert ("You Lose try again");
            } else if (fighterHP <= 0) {
                ($("#" + fighter)).removeClass("d-flex");
                ($("#" + fighter)).addClass("d-none");
                alert ("You defeated " + fighter + "! You are one step closer to the Iron Throne! Select another character.");
                fighterHP = "";
            };
            update();

        });

        function update(){
        $("#jon #HP span").text(characters.jon.HP);
        $("#jon #ATP span").text(characters.jon.ATP);
        $("#jon #CAP span").text(characters.jon.CAP);
        //----------
        $("#dany #HP span").text(characters.dany.HP);
        $("#dany #ATP span").text(characters.dany.ATP);
        $("#dany #CAP span").text(characters.dany.CAP);
        // ----------
        $("#cersi #HP span").text(characters.cersi.HP);
        $("#cersi #ATP span").text(characters.cersi.ATP);
        $("#cersi #CAP span").text(characters.cersi.CAP);
        // ----------
        $("#nightKing #HP span").text(characters.nightKing.HP);
        $("#nightKing #ATP span").text(characters.nightKing.ATP);
        $("#nightKing #CAP span").text(characters.nightKing.CAP);
        
        };
        //Each time the player attacks, their character's Attack Power increases by its base Attack Power. 
//   * For example, if the base Attack Power is 6, each attack will increase the Attack Power by 6 (12, 18, 24, 30 and so on).
        
        // </script>
</body>

</html>